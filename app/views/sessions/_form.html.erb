<%= simple_form_for(form_object) do |f| %>
  <%= f.error_notification %>
  <%= f.hidden_field :topic_id %>

  <div id="occurrences">
    <%= f.label :occurrences, "Session Time(s):", class: 'field-label' %>
    <%= f.simple_fields_for :occurrences do |occurrence| %>
      <%= render "occurrence_fields", :f => occurrence %>
    <% end %>
    <div class='add-fields'>
      <%= link_to_add_association 'add another time for multi-part sessions', 
        f, :occurrences %>
    </div>
  </div>

  <div class='field-label'>Do you want to limit the Registration Period? [ 
    <%= radio_button_tag :reg_period_needed, "Yes", 
      @session.registration_period_defined?, 
      :onclick => "revealRegPeriodArea();"
    %>
    <%= label_tag :reg_period_needed_yes, "Yes" %> 

    <%= radio_button_tag :reg_period_needed, "No", 
      !@session.registration_period_defined?, 
      :onclick => "hideRegPeriodArea();" 
    %>
    <%= label_tag :reg_period_needed_no, "No" %>

    ]
  </div>  
  <div id="registration-period-field" style="<%= @session.registration_period_defined? ? '' : 'display:none' %>">
    <%= f.input :reg_start, label: 'Registration Period Begins:', 
      as: :string, 
      input_html: { 
        class: 'datetimepicker', 
        value: f.object.reg_start,
        :'data-default' => default_reg_start(f.object.reg_start)
      } 
    %>

    <%= f.input :reg_end, label: 'Registration Period Ends:', 
      as: :string, 
      input_html: { 
        class: 'datetimepicker', 
        value: f.object.reg_end,
        :'data-default' => default_reg_end(f.object.reg_start, f.object.time)
      } 
    %>
  </div>

  <%= f.label :instructor_id, "Instructor(s):", :class => 'field-label' %>
  <% f.fields_for :instructors do |builder| %>
    <%#= render "instructor_fields", :f => builder %>
  <% end %>
  <p><%#= link_to_add_fields "add another instructor", f, :instructors %></p>

  <%= f.input :seats, label: 'Seats Available (blank for no limit):' %>

  <div class="location-block">
    <%= f.input :location, label: 'Location:' %>
    <%= f.association :site, label: t(:'sessions.edit.site_label'), prompt: false %>
    <%= f.input :location_url, label: 'Location Url (optional):' %>
  </div>

  <div class="form-actions">
    <%= f.button :submit %>
    <%= link_to 'Cancel', (@session.new_record? ? @session.topic : @session) %>
  </div>

<%#= FIXME render :partial => "users/new_instructor_dialog", :locals => { :item => @session }%>

<% end %>
